{% extends "base.html" %}
{% block content %}
<div class="container-fluid">
  <h2 class="mb-4">Obras</h2>
  <form method="POST">
    <div class="table-responsive">
      <table class="table table-bordered table-hover">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nome</th>
            <th>CPF</th>
            <th>Endereço</th>
            <th>Módulo</th>
            <th>Inversor</th>
            <th>Estrutura</th>
            <th>Pago</th>
            <th>Obra Interna Concluída</th>
            <th>Data Instalação</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          {% for cliente in clientes %}
          <tr>
            <td>{{ cliente.id }}</td>
            <td class="text-nowrap">{{ cliente.nome }}</td>
            <td class="text-nowrap">{{ cliente.cpf }}</td>
            <td class="text-nowrap">{{ cliente.endereco }}</td>
            <td><input type="text" class="form-control fixed-width-input" name="modulo_{{ cliente.id }}" value="{{ cliente.obras[0].modulo if cliente.obras else '' }}"></td>
            <td><input type="text" class="form-control fixed-width-input" name="inversor_{{ cliente.id }}" value="{{ cliente.obras[0].inversor if cliente.obras else '' }}"></td>
            <td><input type="text" class="form-control fixed-width-input" name="estrutura_{{ cliente.id }}" value="{{ cliente.obras[0].estrutura if cliente.obras else '' }}"></td>
            <td><input type="checkbox" name="pago_{{ cliente.id }}" {% if cliente.obras and cliente.obras[0].pago %}checked{% endif %}></td>
            <td><input type="checkbox" name="obra_interna_concluida_{{ cliente.id }}" {% if cliente.obras and cliente.obras[0].obra_interna_concluida %}checked{% endif %}></td>
            <td><input type="date" class="form-control" name="data_instalacao_{{ cliente.id }}" value="{{ cliente.obras[0].data_instalacao if cliente.obras else '' }}"></td>
            <td><input type="text" class="form-control fixed-width-input" name="status_{{ cliente.id }}" value="{{ cliente.obras[0].status if cliente.obras else '' }}"></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <button type="submit" class="btn btn-success mt-3">Salvar</button>
  </form>
</div>
{% endblock %}
